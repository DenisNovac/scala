# Неявные параметры

Метод может иметь список неявных параметров, помеченный слово implicit в начале списка параметров. Если параметры в этом списке не передаются как обычно, то Scala будет искать, где можно полчить неявное значение требуемого типа.

Scala ищет неявные параметры в следующих местах:

- Сначала Scala ищет неявные параметры, доступ к которым можно получить напрямую (без префикса) в месте вызова метода в котором запрошены неявные параметры.
- Затем Scala ищет членов, помеченных как implicit во всех объектах-компаньонах, связанных с типом неявного параметра. 

```scala
abstract class Monoid[A] {
  def add(x: A, y: A): A
  def unit: A
}

object ImplicitTest {
  implicit val stringMonoid: Monoid[String] = new Monoid[String] {
    def add(x: String, y: String): String = x concat y
    def unit: String = ""
  }

  implicit val intMonoid: Monoid[Int] = new Monoid[Int] {
    def add(x: Int, y: Int): Int = x + y
    def unit: Int = 0
  }

  // вторые скобки можно использовать и с обычными аргументами, но для указания implicit параметров они обязательны
  def sum[A](xs: List[A])(implicit m: Monoid[A]): A =
    if (xs.isEmpty) m.unit
    else m.add(xs.head, sum(xs.tail))

  def main(args: Array[String]): Unit = {
    println(sum(List(1,2,3)))
    println(sum(List("a","b","c")))
  }
}
```

`Monoid` определяет операцию `add`, которая сочетает два элемента типа A и возвращает элемент типа A, операция `unit` позволяет вернуть отдельный (специфичный) элемент типа A. 

Чтобы показать, как работают неявные параметры, определены моноиды `stringMonoid` и `intMonoid` для строк и целых чисел. Клюевое слово `implicit` указывает на то, что объект может быть использован неявно. 

Метод `sum` принимает `List[A]` и возвращает `A`, который берет начальное `A` из `unit` и объединяет каждое следующее `A` в списке используя `add` метод. Указание параметра `m` в качестве неявного параметра подразумевает, что `xs` параметр будет обеспечен тогда, когда при вызове параметра метода Scala сможет найти неявный `Monoid[A]` чтобы передать в качестве параметра `m`. 

В этом коде мы дважды вызываем `sum`. Каждый раз передаётся только `xs`. Поэтому Scala ищет неявное значение в указанных ранее областях видимости. Первый вызов происходит с `List[Int]` в качестве `xs`. Это значит, что `A=Int`. Неявный список параметров с `m` опущен, так что Scala ищет неявное значения типа `Monoid[Int]`.

`intMonoid` - это задание неявного значения, доступ к которому можно получить непосредственно в `main`. Оно имеет подходящий тип, поэтому передаётся методу `sum` автоматически.





























